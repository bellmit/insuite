#!/bin/bash

echo "Run mongo scripts remotely on some customer machines."

function execRemote {

    ssh_host=$1

    #ssh $ssh_user@$ssh_host "mongo 0 --quiet --eval 'print( \"$ssh_host ____ \" + db.activities.count({catalogShort:{\$in:[\"UVGOÄ\",\"GOÄ\"]}, actType: \"TREATMENT\", status: \"VALID\", \$where: \"this.price === this.actualPrice && Boolean(this.billingFactorValue) && \\\"1\\\" !== this.billingFactorValue\"}));'"
    #ssh $ssh_user@$ssh_host "mongo 0 --quiet --eval 'print( \"$ssh_host ____ \" + db.activities.count({catalogShort:{\$in:[\"UVGOÄ\",\"GOÄ\"]}, actType: \"TREATMENT\", status: \"VALID\", \$where: \"this.price === this.actualPrice && Boolean(this.billingFactorValue) && \\\"1\\\" !== this.billingFactorValue\"}));'"
    #ssh $ssh_user@$ssh_host "mongo 0 --quiet --eval 'print( \"$ssh_host ____ \"); printjson( db.activities.aggregate([{\$match:{actType:\"INVOICE\"}},{\$group:{_id:\"\$invoiceNo\",x:{\$sum:1}}},{\$match:{x:{\$gt:1}}}]) );'"
    sudo -H -u supporter ssh root@CZ154101C2.hub  "dc-mongo 0 --quiet --eval 'print(\"CZ154101C2____\");printjson(db.patients.find({careLevel:{\$exists:true}}).count());'"
}


# !!! Autogenerate this list !!!
#
# alias | grep login | cut -f 3 -d ' ' | cut -f 1 -d "'" | xargs -n 1 -I JJJJ echo "execRemote 'JJJJ'"
execRemote 'CZ1541023R'
execRemote '5C7351P54J'
execRemote 'CZ154101H6'
execRemote 'CZ15420069'
execRemote '7CE805P0RB'
execRemote '7CE817P35E'
execRemote '7CE735P00F'
execRemote '5c7351p4tw'
execRemote 'CZ152000NA'
execRemote 'CZ164900R9'
execRemote 'CZ1541022B'
execRemote 'CZ152000TJ'
execRemote '7CE735P05R'
execRemote 'CZ143701LB'
execRemote '7CE728P0PK'
execRemote 'CZ164801H0'
execRemote 'CZ1541024B'
execRemote 'CZ1542006A'
execRemote 'CZ143701L9'
execRemote 'CZ154101J8'
execRemote 'CZ1541022H'
execRemote '7CE728P0NS'
execRemote 'CZ171201D8'
execRemote '7CE729P1C6'
execRemote '7CE735P06N'
execRemote '7CE735P056'
execRemote 'CZ171202CP'
execRemote 'CZ171202MT'
execRemote 'CZ1651011L'
execRemote 'CZ1651012D'
execRemote 'CZ15420065'
execRemote 'C2BQ7J2'
execRemote '7CE805P111'
execRemote 'FWLVXK2'
execRemote 'FWRTXK2'
execRemote '7CE735P00R'
execRemote 'HJ7C2J2'
execRemote 'CZ16510127'
execRemote 'CZ171202FD'
execRemote 'CZ171202B8'
execRemote 'CZ171202DD'
execRemote 'CZ171202JE'
execRemote 'CZ171202J4'
execRemote 'CZ154101BL'
execRemote '7CE819U03R'
execRemote 'DEMO'
execRemote 'CZ154101HY'
execRemote '5C7351P4VD'
execRemote '1GC2JN2'
execRemote 'CZ164802AM'
execRemote 'FVZFDP2'
execRemote 'CZ164801UW'
execRemote '46LNYJ2'
execRemote 'CZ152000MW'
execRemote 'CZ171202E8'
execRemote 'CZ154101BG'
execRemote 'CZ154101HS'
execRemote 'CZ171202CM'
execRemote 'CZ154101J2'
execRemote '7CE728P0RP'
execRemote 'CZ154101H9'
execRemote 'CZ171202MK'
execRemote '4114BR2'
execRemote '7CE735P011'
execRemote '4111BR2'
execRemote 'CZ154101HU'
execRemote '7CE817P2UY'
execRemote 'CZ143701MR'
execRemote 'CZ143701KS'
execRemote 'CZ143701LL'
execRemote '6K4B8P2'
execRemote 'CZ17230055'
execRemote '6KBB8P2'
execRemote 'CZ1520010P'
execRemote 'CZ152000SM'
execRemote '7CE819U072'
execRemote 'CZ1648025Z'
execRemote '7CE817P2SE'
execRemote 'CZ143701KT'
execRemote 'CZ143701LN'
execRemote 'CZ143701LZ'
execRemote 'CZ15410241'
execRemote 'CZ15420066'
execRemote 'CZ152000MP'
execRemote '5C7249P3PU'
execRemote 'CZ154101CR'
execRemote 'CZ164801W8'
execRemote 'JBYQJG2'
execRemote 'JBYSG62'
execRemote 'CZ16510125'
execRemote 'CZ143701KW'
execRemote 'CZ171202B9'
execRemote 'CZ170602YR'
execRemote '7CE401P1VA'
execRemote 'CZ1707009A'
execRemote '29SGXJ2'
execRemote 'CZ1541023M'
execRemote '2H0V4R2'
execRemote '7CE805P0MZ'
execRemote 'CZ1541022E'
execRemote 'CZ154101BW'
execRemote 'CZ15420068'
execRemote '5C7249P3PW'
execRemote 'CZ172301UM'
execRemote '7CE805P0SU'
execRemote 'CZ1541023G'
execRemote 'CZ171202EV'
execRemote 'CZ1541022K'
execRemote 'CZ171202CN'
execRemote 'CZ152000Y1'
execRemote '7CE817P2XG'
execRemote '7CE728P3ND'
execRemote '834TNR2'
execRemote 'CZ1541024A'
execRemote '5c7319p1jp'
execRemote '7CE728P0PX'
execRemote '14YS7J2'
execRemote 'CZ154101HW'
execRemote 'CZ154101J7'
execRemote 'CZ171202N4'
execRemote '7CE817P2YX'
execRemote 'FJKXGL2'
execRemote '7CE805P0RX'
execRemote '8K6R2S2'
execRemote 'CZ1720004F'
execRemote 'CZ172301X3'
execRemote 'CZ1723004Z'
execRemote 'CZ1723004W'
execRemote 'CZ1541021S'
execRemote 'CZ171202FG'
execRemote 'CZ17200027'
execRemote 'CZ1723025S'
execRemote 'CZ164900FR'
execRemote 'CZ171901L3'
execRemote 'CZ154101HV'
execRemote 'CZ171500T1'
execRemote 'CZ172301YR'
execRemote 'CZ1723020D'
execRemote '7CE729P170'
execRemote 'CZ17030067'
execRemote 'CZ171202J9'
execRemote 'CZ17230050'
execRemote 'CZ165100PS'
execRemote 'CZ172301J4'
execRemote 'CZ17030068'
execRemote 'CZ154101JD'
execRemote 'CZ1716002L'
execRemote 'CZ1542006F'
execRemote 'CZ17230024'
execRemote 'CZ1703006A'
execRemote 'CZ171501AS'
execRemote 'CZ1703006D'
execRemote 'CZ1542006E'
execRemote 'CZ172301UP'
execRemote 'CZ172301UK'
execRemote 'CZ1725019W'
execRemote 'B6X5SP2'
execRemote 'JLNVJG2'
execRemote 'CZ17070097'
execRemote 'CZ143701KM'
execRemote 'CZ172301P7'
execRemote '79FSSM2'
execRemote '6NK4MM2'
execRemote '8TFTHP2'
execRemote 'CZ170602N5'
execRemote '7CE735P00M'
execRemote 'CZ154101BY'
execRemote 'CZ152000XB'
execRemote 'CZ164900RD'
execRemote 'JMFRJD2'
execRemote 'CZ143701LM'
execRemote 'CZ143701KV'
execRemote 'CZ264202X9'
execRemote 'CZ154101JS'
execRemote 'CZ154101HP'
execRemote 'CZ1541022F'
execRemote '5C7351P4UL'
execRemote 'CZ1520010S'
execRemote 'CZ1723003K'
execRemote 'CZ154101BN'
execRemote 'CZ171202CR'
execRemote 'CZ143701L5'
execRemote '7XVR2S2'
execRemote '7CE817P2YU'
execRemote '7CE728P0S0'
execRemote 'CZ172301LZ'
execRemote '7CE805P0Y8'
execRemote 'CZ1542006C'
execRemote '7CE805P0MT'
execRemote 'CZ154101C2'
execRemote 'CZ1541023E'
execRemote 'CZ1723005E'
execRemote 'CZ171202N1'
execRemote 'CZ154101BJ'
execRemote 'CZ164802E5'
execRemote 'CZ154101BX'
execRemote 'CZ143701MT'
execRemote '7CE805P0NK'